# Курсовая работа по АФЛП

## Заказчик: __Александра Горбунова__

## 6. Система управления роботом на гусеничном ходу

> Реализовать схему гусеничного робота, который управляется с дистанционного пульта.  
> Предусмотреть различные режимы хода, поворота, запуска и остановки: режим прогрева двигателя перед стартом, элементы искусственного интеллекта (автоостановка перед препятствием и т.д.).

## Описание RTL

### Карта сигналов схемы

![Блок-схема сигналов схемы](/doc/pics/overflow.png)

| Название сигнала | Направление | Разрядность | Назначение |
| ---------------- | ----------- | :---------: | :---------- |
| clk_i | [in] | 1 | Тактовый синхросигнал |  
| rstn_i | [in] | 1 | Асинхронный сброс системы |  
| motor_on_i | [in] | 1 | Управляющий сигнал моторами робота |
| motor_status_o | [out] | 1 | Сигнал индикации статуса двигателей робота
| left_motor_o | [out] | 2 | сигнал управления левым двигателем робота |
| right_motor_o | [out] | 2 | сигнал управления правым двигателем робота |
| move_i | [in] | 3 | входной сигнал команды движения с пульта ДУ |
| tracker_fwrd_i | [in] | 1 | передний датчик препятствий |
| tracker_status_o | [out] | 1 | статус датчика препятствий, передаваемый на пульт ДУ |

### Назначение сигналов управления `move_i`

| Значение на шине `move_i` | Описание |
| ------------------------- | -------- |
| 0b000  / 0b100            | Робот стоит на месте |
| 0b111                     | Движение робота вперед |
| 0b101 / 0b010             | Поворот робота влево  |
| 0b110 / 0b001             | Поворот робота вправо |
| 0b011                     | Движение робота назад |

### Назначение выходных сигналов двигателей робота

| Значение на шинах `*_motor_o` | Описание |
| ---------------------------   | -------- |
| 0b00                          | Гусенина не двигается |
| 0b01                          | Движение гусеницы вперед |
| 0b10                          | Движение гусеницы назад |

### Описание состояний конечного автомата робота

* `PWR_OFF` — двигатели робота выключены; не реагирует на команды передвижения.  
* `ENGINE_START` — запущен прогрев двигателей;  
* `ENGINE_END` — выключение двигателей робота;
* `PWR_ON_IDLE` — двигатели робота включены; ожидание команд на передвижение;
* `MOVE_FWRD` — движение вперед;
* `TURN_LEFT` — поворот влево;  
* `TURN_RIGHT` — поворот вправо;  
* `MOVE_BACK` — движение назад;
* `TRACKER_ERROR` — блокировка движения вперед из-за обнаруженного датчиком препятствия.

## Функциональная верификация

__Тул для верификации: Mentor QuestaSim__

### Управление роботом

Осуществлено через Verilog task.  

### Визуализация движения робота

Робот движется по полю, размером 7x7.

* Координаты по X -- `axis_x`
* Координаты по Y -- `axis_y`
* Сторона движения -- `move_side`
